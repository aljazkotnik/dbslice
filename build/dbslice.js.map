{"version":3,"file":"dbslice.js","sources":["../src/plot/threeSurf3d.js","../src/plot/threeMeshFromStruct.js","../src/plot/d3ContourStruct2d.js","../src/plot/d3LineSeries.js","../src/plot/d3Scatter.js","../src/core/makeNewPlot.js","../src/core/updatePlot.js","../src/core/update.js","../src/core/dbsliceData.js","../src/core/makePlotsFromPlotRowCtrl.js","../src/core/refreshTasksInPlotRows.js","../src/core/makeSessionHeader.js","../src/core/render.js","../src/core/cfUpdateFilters.js","../src/plot/cfD3BarChart.js","../src/plot/cfD3Histogram.js","../src/plot/cfD3Scatter.js","../src/plot/cfLeafletMapWithMarkers.js","../src/core/cfInit.js","../src/Dbslice.js"],"sourcesContent":["const threeSurf3d = {\n\n\tmake : function ( element, geometry, layout ) {\n\n\t\tthreeSurf3d.update ( element, geometry, layout );\n\n\t},\n\n\tupdate : function (element, geometry, layout ) {\n\n\t\tif (geometry.newData == false) {\n            return\n        }\n\n        if (layout.vScale === undefined) {\n        \tvar vScale = geometry.vScale;\n        } else {\n        \tvar vScale = layout.vScale;\n        }\n\n        var color = d3.scaleLinear()\n        \t.domain( vScale )\n        \t.interpolate(function() { return d3.interpolateRdBu; });\n\n        geometry.faces.forEach(function(face, index) {\n        \tface.vertexColors[0] = new THREE.Color( color( geometry.faceValues[index][0] ) );\n        \tface.vertexColors[1] = new THREE.Color( color( geometry.faceValues[index][1] ) );\n        \tface.vertexColors[2] = new THREE.Color( color( geometry.faceValues[index][2] ) );\n        })\n\n\t\tvar container = d3.select(element);\n\n\t\tcontainer.select(\".plotArea\").remove();\n\n        var div = container.append(\"div\")\n        \t.attr(\"class\", \"plotArea\");\n\n\t\tvar width = container.node().offsetWidth,\n\t\t\theight = layout.height;\n\n\t\t// Compute normals for shading\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.computeVertexNormals();\n    \n\t\t// Use MeshPhongMaterial for a reflective surface\n\t\tvar material = new THREE.MeshPhongMaterial( {\n    \t\tside: THREE.DoubleSide,\n    \t\tcolor: 0xffffff,\n    \t\tvertexColors: THREE.VertexColors,\n    \t\tspecular: 0x0,\n    \t\tshininess: 100.,\n    \t\temissive: 0x0\n    \t});\n    \n\t\t// Initialise threejs scene\n\t\tvar scene = new THREE.Scene();\n\n\t\t// Add background colour\n\t\tscene.background = new THREE.Color( 0xefefef );\n    \n\t\t// Add Mesh to scene\n\t\tscene.add( new THREE.Mesh( geometry, material ) );\n    \n\t\t// Create renderer\n\t\tvar renderer = new THREE.WebGLRenderer({alpha:true, antialias:true}); \n\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\trenderer.setSize( width , height );\n\n\t\t// Set target DIV for rendering\n\t\t//var container = document.getElementById( elementId );\n\t\tdiv.node().appendChild( renderer.domElement );\n\n\t\t// Define the camera\n\t\tvar camera = new THREE.PerspectiveCamera( 60, 1, 0.1, 10 );\n\t\tcamera.position.z = 2; \n\n\t\t// Add controls \n\t\tvar controls = new THREE.OrbitControls( camera, renderer.domElement );\n\t\tcontrols.addEventListener( 'change', function(){\n    \t\trenderer.render(scene,camera); // re-render if controls move/zoom \n\t\t} ); \n\t\tcontrols.enableZoom = true; \n \n\n\t\tvar ambientLight = new THREE.AmbientLight( 0xaaaaaa );\n\t\tscene.add( ambientLight );\n\n\t\tvar lights = [];\n\t\tlights[ 0 ] = new THREE.PointLight( 0xffffff, 1, 3 );\n\t\tlights[ 1 ] = new THREE.PointLight( 0xffffff, 1, 3 );\n\t\tlights[ 2 ] = new THREE.PointLight( 0xffffff, 1, 3 );\n\t\tlights[ 3 ] = new THREE.PointLight( 0xffffff, 1, 3 );\n\t\tlights[ 4 ] = new THREE.PointLight( 0xffffff, 1, 3 );\n\t\tlights[ 5 ] = new THREE.PointLight( 0xffffff, 1, 3 );\n\n\t\tlights[ 0 ].position.set( 0, 2, 0 );\n\t\tlights[ 1 ].position.set( 1, 2, 1 );\n\t\tlights[ 2 ].position.set( - 1, - 2, -1 );\n\t\tlights[ 3 ].position.set( 0, 0, 2 );\n\t\tlights[ 4 ].position.set( 0, 0, -2 );\n\t\tlights[ 5 ].position.set( 0, -2, 0 );\n\n\t\tlights.forEach(function(light){scene.add(light)});\n\n  \n\t\t// Make initial call to render scene\n\t\trenderer.render( scene, camera );\n\n\t\tgeometry.newData = false;\n\n\t}\n\n}\n\nexport { threeSurf3d };","function threeMeshFromStruct ( data ) {\n\tvar x, y, z, v, n, m;\n   \n    var xMinAll = d3.min( data.surfaces[0].x );\n\tvar yMinAll = d3.min( data.surfaces[0].y );\n\tvar zMinAll = d3.min( data.surfaces[0].z );\n\tvar vMinAll = d3.min( data.surfaces[0].v );\n\n\n\tvar xMaxAll = d3.max( data.surfaces[0].x );\n\tvar yMaxAll = d3.max( data.surfaces[0].y );\n\tvar zMaxAll = d3.max( data.surfaces[0].z );\n\tvar vMaxAll = d3.max( data.surfaces[0].v );\n\n\tvar nDataSets = data.surfaces.length;\n\n\tfor (var nds = 1; nds < nDataSets; ++nds ) {\n\t\txMinAll = ( d3.min( data.surfaces[nds].x ) < xMinAll ) ? d3.min( data.surfaces[nds].x ) : xMinAll;\n\t\tyMinAll = ( d3.min( data.surfaces[nds].y ) < yMinAll ) ? d3.min( data.surfaces[nds].y ) : yMinAll;\n\t\tzMinAll = ( d3.min( data.surfaces[nds].z ) < zMinAll ) ? d3.min( data.surfaces[nds].z ) : zMinAll;\n\t\tvMinAll = ( d3.min( data.surfaces[nds].v ) < vMinAll ) ? d3.min( data.surfaces[nds].v ) : vMinAll;\n\t\txMaxAll = ( d3.max( data.surfaces[nds].x ) > xMaxAll ) ? d3.max( data.surfaces[nds].x ) : xMaxAll;\n\t\tyMaxAll = ( d3.max( data.surfaces[nds].y ) > yMaxAll ) ? d3.max( data.surfaces[nds].y ) : yMaxAll;\n\t\tzMaxAll = ( d3.max( data.surfaces[nds].z ) > zMaxAll ) ? d3.max( data.surfaces[nds].z ) : zMaxAll;\n\t \tvMaxAll = ( d3.max( data.surfaces[nds].v ) > vMaxAll ) ? d3.max( data.surfaces[nds].v ) : vMaxAll;\t\n    }\n\n\tvar xrange = xMaxAll - xMinAll;\n\tvar yrange = yMaxAll - yMinAll;\n\tvar zrange = zMaxAll - zMinAll;\n\n\tvar xmid = 0.5 * ( xMinAll + xMaxAll );\n\tvar ymid = 0.5 * ( yMinAll + yMaxAll );\n\tvar zmid = 0.5 * ( zMinAll + zMaxAll );\n\n\tvar scalefac = 1./d3.max( [ xrange, yrange, zrange ] );\n\n\t// Use d3 for color scale \n\t// vMinAll=0.4;\n\t// vMaxAll=1.1;\n\t// var color = d3.scaleLinear()\n    //\t.domain( [ vMinAll, vMaxAll ] )\n    //\t.interpolate(function() { return d3.interpolateRdBu; });\n    \n\t// Initialise threejs geometry\n\tvar geometry = new THREE.Geometry();\n\tgeometry.faceValues = []; \n\tgeometry.vScale = [ vMinAll, vMaxAll ];\n\n\tvar noffset = 0\n\tfor ( nds = 0; nds < nDataSets; ++nds ) {\n\t\tx = data.surfaces[nds].x;\n    \ty = data.surfaces[nds].y;\n    \tz = data.surfaces[nds].z;\n    \tv = data.surfaces[nds].v;\n    \tm = data.surfaces[nds].size[0];\n    \tn = data.surfaces[nds].size[1];\n\n    \tvar nverts = n * m;\n\n    \t// Add grid vertices to geometry\n\t\tfor (var k = 0; k < nverts; ++k) {\n    \t\tvar newvert= new THREE.Vector3( ( x[k] - xmid) * scalefac, ( y[k] - ymid) * scalefac, (z[k] - zmid) * scalefac);\n    \t\tgeometry.vertices.push(newvert);\n\t\t}\n\n\t\t// Add cell faces (2 traingles per cell) to geometry\n\t\tfor (var j = 0; j < m-1; j++){\n    \t\tfor (var i = 0; i < n-1; i++){ \n        \t\tvar n0 = j*n + i;\n        \t\tvar n1 = n0 + 1;\n        \t\tvar n2 = (j+1)*n + i + 1;\n        \t\tvar n3 = n2 - 1;\n        \t\tvar face1 = new THREE.Face3( n0 + noffset, n1 + noffset, n2 + noffset );\n        \t\tvar face2 = new THREE.Face3( n2 + noffset, n3 + noffset, n0 + noffset );\n        \t\t// face1.vertexColors[0] = new THREE.Color( color( v[n0] ) );\n        \t\t// face1.vertexColors[1] = new THREE.Color( color( v[n1] ) );\n        \t\t// face1.vertexColors[2] = new THREE.Color( color( v[n2] ) );\n        \t\t// face2.vertexColors[0] = new THREE.Color( color( v[n2] ) );\n        \t\t// face2.vertexColors[1] = new THREE.Color( color( v[n3] ) );\n        \t\t// face2.vertexColors[2] = new THREE.Color( color( v[n0] ) );\n        \t\tgeometry.faces.push( face1 );\n        \t\tgeometry.faces.push( face2 );\n        \t\tvar faceValue1 = [];\n        \t\tvar faceValue2 = [];\n        \t\tfaceValue1.push( v[n0] );\n        \t\tfaceValue1.push( v[n1] );\n        \t\tfaceValue1.push( v[n2] );\n        \t\tfaceValue2.push( v[n2] );\n        \t\tfaceValue2.push( v[n3] );\n        \t\tfaceValue2.push( v[n0] );\n        \t\tgeometry.faceValues.push( faceValue1 );\n        \t\tgeometry.faceValues.push( faceValue2 );\n    \t\t}\n\t\t}\n\t\tnoffset = noffset + nverts;\n\t}\n    \n    return geometry;\n\n}\n\nexport { threeMeshFromStruct };","const d3ContourStruct2d = {\n\n    make : function ( element, data, layout ) {\n\n        d3ContourStruct2d.update ( element, data, layout )\n\n    },\n\n    update : function ( element, data, layout ) {\n\n        if (data.newData == false) {\n            return\n        }\n\n        var x, y, v, n, m;\n\n        var marginDefault = {top: 20, right: 10, bottom: 20, left: 10};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svgWidth = container.node().offsetWidth,\n\t\t    svgHeight = layout.height;\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        container.select(\"svg\").remove();\n\n        var svg = container.append(\"svg\")\n            .attr(\"width\", svgWidth)\n            .attr(\"height\", svgHeight);\n\n        var plotArea = svg.append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n            .attr(\"class\", \"plotArea\");\n\n        var xMinAll = d3.min( data.surfaces[0].x );\n        var yMinAll = d3.min( data.surfaces[0].y );\n        var vMinAll = d3.min( data.surfaces[0].v );\n\n        var xMaxAll = d3.max( data.surfaces[0].x );\n        var yMaxAll = d3.max( data.surfaces[0].y );\n        var vMaxAll = d3.max( data.surfaces[0].v );\n\n        var nDataSets = data.surfaces.length;\n\n        for (var nds = 1; nds < nDataSets; ++nds ) {\n            xMinAll = ( d3.min( data.surfaces[nds].x ) < xMinAll ) ? d3.min( data.surfaces[nds].x ) : xMinAll;\n            yMinAll = ( d3.min( data.surfaces[nds].y ) < yMinAll ) ? d3.min( data.surfaces[nds].y ) : yMinAll;\n            vMinAll = ( d3.min( data.surfaces[nds].v ) < vMinAll ) ? d3.min( data.surfaces[nds].v ) : vMinAll;\n            xMaxAll = ( d3.max( data.surfaces[nds].x ) > xMaxAll ) ? d3.max( data.surfaces[nds].x ) : xMaxAll;\n            yMaxAll = ( d3.max( data.surfaces[nds].y ) > yMaxAll ) ? d3.max( data.surfaces[nds].y ) : yMaxAll;\n            vMaxAll = ( d3.max( data.surfaces[nds].v ) > vMaxAll ) ? d3.max( data.surfaces[nds].v ) : vMaxAll;\n        }\n\n        // set x and y scale to maintain 1:1 aspect ratio  \n        var domainAspectRatio = ( yMaxAll - yMinAll ) / ( xMaxAll - xMinAll );\n        var rangeAspectRatio = height / width;\n  \n        if (rangeAspectRatio > domainAspectRatio) {\n            var xscale = d3.scaleLinear()\n                .domain( [ xMinAll , xMaxAll ] )\n                .range( [ 0 , width ] );\n            var yscale = d3.scaleLinear()\n                .domain( [ yMinAll , yMaxAll ] )\n                .range( [ domainAspectRatio * width , 0 ] );\n        } else {\n            var xscale = d3.scaleLinear()\n                .domain( [ xMinAll , xMaxAll ] )\n                .range( [ 0 , height / domainAspectRatio ] );\n            var yscale = d3.scaleLinear()\n                .domain( [ yMinAll , yMaxAll ] ) \n                .range( [ height , 0 ] );\n        }\n\n        if (layout.vScale !== undefined) {\n            vMinAll = layout.vScale[0];\n            vMaxAll = layout.vScale[1];\n        }\n\n        // array of threshold values \n        var thresholds = d3.range( vMinAll , vMaxAll , ( vMaxAll - vMinAll ) / 21 );\n\n        // color scale  \n        var color = d3.scaleLinear()\n            .domain(d3.extent(thresholds))\n            .interpolate(function() { return d3.interpolateRdBu; });\n\n         var zoom = d3.zoom()\n            .scaleExtent([0.5, Infinity])\n            .on(\"zoom\", zoomed);\n\n        svg.transition().call(zoom.transform, d3.zoomIdentity);\n        svg.call(zoom);\n\n        for (var nds = 0; nds < nDataSets; ++nds) {\n            x = data.surfaces[nds].x;\n            y = data.surfaces[nds].y;\n            v = data.surfaces[nds].v;\n            m = data.surfaces[nds].size[0];\n            n = data.surfaces[nds].size[1];\n\n    \t    // configure a projection to map the contour coordinates returned by\n\t\t    // d3.contours (px,py) to the input data (xgrid,ygrid)\n            var projection = d3.geoTransform( {\n                point: function( px, py ) {\n                    var xfrac, yfrac, xnow, ynow;\n                    var xidx, yidx, idx0, idx1, idx2, idx3;\n                    // remove the 0.5 offset that comes from d3-contour\n                    px = px - 0.5;\n                    py = py - 0.5;\n                    // clamp to the limits of the xgrid and ygrid arrays (removes \"bevelling\" from outer perimeter of contours)\n                    px < 0 ? px = 0 : px;\n                    py < 0 ? py = 0 : py;\n                    px > ( n - 1 ) ? px = n - 1 : px;\n                    py > ( m - 1 ) ? py = m - 1 : py;\n                    // xidx and yidx are the array indices of the \"bottom left\" corner\n                    // of the cell in which the point (px,py) resides\n                    xidx = Math.floor(px);\n                    yidx = Math.floor(py); \n                    xidx == ( n - 1 ) ? xidx = n - 2 : xidx;\n                    yidx == ( m - 1 ) ? yidx = m - 2 : yidx;\n                    // xfrac and yfrac give the coordinates, between 0 and 1,\n                    // of the point within the cell \n                    xfrac = px - xidx;\n                    yfrac = py - yidx;\n                    // indices of the 4 corners of the cell\n                    idx0 = xidx + yidx * n;\n                    idx1 = idx0 + 1;\n                    idx2 = idx0 + n;\n                    idx3 = idx2 + 1;\n                    // bilinear interpolation to find projected coordinates (xnow,ynow)\n                    // of the current contour coordinate\n                    xnow = (1-xfrac)*(1-yfrac)*x[idx0] + xfrac*(1-yfrac)*x[idx1] + yfrac*(1-xfrac)*x[idx2] + xfrac*yfrac*x[idx3];\n                    ynow = (1-xfrac)*(1-yfrac)*y[idx0] + xfrac*(1-yfrac)*y[idx1] + yfrac*(1-xfrac)*y[idx2] + xfrac*yfrac*y[idx3];\n                    this.stream.point(xscale(xnow), yscale(ynow));\n                }\n            });\n\n            // initialise contours\n            var contours = d3.contours()\n                .size([n, m])\n                .smooth(true)\n                .thresholds(thresholds);\n\n            // make and project the contours\n            plotArea.selectAll(\"path\")\n                .data(contours(v))\n                .enter().append(\"path\")\n                    .attr(\"d\", d3.geoPath(projection))\n                    .attr(\"fill\", function(d) { return color(d.value); });        \n\n        }\n\n        function zoomed() {\n            var t = d3.event.transform;\n            plotArea.attr( \"transform\", t );\n        }\n\n        data.newData = false;\n    }\n}\n\nexport { d3ContourStruct2d };","const d3LineSeries = {\n\n    make : function ( element, data, layout ) {\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svgWidth = container.node().offsetWidth,\n            svgHeight = layout.height;\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var svg = container.append(\"svg\")\n            .attr(\"width\", svgWidth)\n            .attr(\"height\", svgHeight)\n            .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n                .attr( \"class\", \"plotArea\" );\n\n        d3LineSeries.update( element, data, layout );\n\n    },\n\n    update : function ( element, data, layout ) {\n\n        if (data.newData == false) {\n            return\n        }\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svg = container.select(\"svg\");\n\n        var svgWidth = svg.attr(\"width\");\n        var svgHeight = svg.attr(\"height\");\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var nseries = data.series.length;\n\n        var xmin = d3.min( data.series[0].data, function(d) { return d.x; } );\n        var xmax = d3.max( data.series[0].data, function(d) { return d.x; } );\n        var ymin = d3.min( data.series[0].data, function(d) { return d.y; } );\n        var ymax = d3.max( data.series[0].data, function(d) { return d.y; } );\n\n        for (var n = 1; n < nseries; ++n) {\n            var xminNow =  d3.min( data.series[n].data, function(d) { return d.x; } );\n            ( xminNow < xmin ) ? xmin = xminNow : xmin = xmin;\n            var xmaxNow =  d3.max( data.series[n].data, function(d) { return d.x; } );\n            ( xmaxNow > xmax ) ? xmax = xmaxNow : xmax = xmax;\n            var yminNow =  d3.min( data.series[n].data, function(d) { return d.y; } );\n            ( yminNow < ymin ) ? ymin = yminNow : ymin = ymin;\n            var ymaxNow =  d3.max( data.series[n].data, function(d) { return d.y; } );\n            ( ymaxNow > ymax ) ? ymax = ymaxNow : ymax = ymax;\n        }\n\n        if ( layout.xscale == \"time\" ) {\n            var xscale = d3.scaleTime(); \n            var xscale0 = d3.scaleTime();        \n        } else {\n            var xscale = d3.scaleLinear();\n            var xscale0 = d3.scaleLinear();\n        }\n\n        xscale.range( [0, width] )\n              .domain( [xmin, xmax] );\n\n        xscale0.range( [0, width] )\n              .domain( [xmin, xmax] );\n\n        var yscale = d3.scaleLinear()\n            .range( [height, 0] )\n            .domain( [ymin, ymax] );\n\n        var yscale0 = d3.scaleLinear()\n            .range( [height, 0] )\n            .domain( [ymin, ymax] );\n\n        var colour = d3.scaleOrdinal( d3.schemeCategory20c );\n\n        var line = d3.line()\n            .x( function( d ) { return xscale( d.x ); } )\n            .y( function( d ) { return yscale( d.y ); } );\n\n        var plotArea = svg.select(\".plotArea\");\n\n        var clip = svg.append(\"clipPath\")\n            .attr(\"id\", \"clip\")\n            .append(\"rect\")\n                .attr(\"width\", width)\n                .attr(\"height\", height);\n\n        var zoom = d3.zoom()\n            .scaleExtent([0.5, Infinity])\n            .on(\"zoom\", zoomed);\n\n        svg.transition().call(zoom.transform, d3.zoomIdentity);\n        svg.call(zoom);\n\n        var allSeries = plotArea.selectAll( \".plotSeries\" ).data( data.series );\n\n        allSeries.enter()\n            .each( function() {\n                var series = d3.select( this );\n                var seriesLine = series.append( \"g\" )\n                    .attr( \"class\", \"plotSeries\")\n                    .attr( \"series-name\", function( d ) { return d.name; } )\n                    .append( \"path\" )\n                        .attr( \"class\", \"line\" )\n                        .attr( \"d\", function( d ) { return line( d.data ); } )\n                        .style( \"stroke\", function( d ) { return colour( d.name ); } )    \n                        .style( \"fill\", \"none\" )\n                        .style( \"stroke-width\", \"2px\" )\n                        .attr( \"clip-path\", \"url(#clip)\")\n                        .on( \"mouseover\", tipOn )\n                        .on( \"mouseout\", tipOff );\n        } );\n\n        allSeries.each( function() {\n            var series = d3.select( this );\n            var seriesLine = series.select( \"path.line\" );\n            seriesLine.transition()\n                    .attr( \"d\", function( d ) { return line( d.data ); } );\n        } );\n\n        allSeries.exit().remove();\n\n        var xAxis = d3.axisBottom( xscale ).ticks(5);\n        var yAxis = d3.axisLeft( yscale );\n\n        var gX = plotArea.select(\".axis--x\");\n        if ( gX.empty() ) {\n            gX = plotArea.append(\"g\")\n                .attr( \"transform\", \"translate(0,\" + height + \")\" )\n                .attr( \"class\", \"axis--x\")\n                .call( xAxis );\n            gX.append(\"text\")\n                .attr(\"fill\", \"#000\")\n                .attr(\"x\", width)\n                .attr(\"y\", margin.bottom)\n                .attr(\"text-anchor\", \"end\")\n                .text(layout.xAxisLabel);\n        } else {\n            gX.transition().call( xAxis );\n        }\n\n        var gY = plotArea.select(\".axis--y\");\n        if ( gY.empty() ) {\n            gY = plotArea.append(\"g\")\n                .attr( \"class\", \"axis--y\")\n                .call( yAxis );\n            gY.append(\"text\")\n                    .attr(\"fill\", \"#000\")\n                    .attr(\"transform\", \"rotate(-90)\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", -margin.left + 15)\n                    .attr(\"text-anchor\", \"end\")\n                    .text(layout.yAxisLabel);\n        } else {\n            gY.transition().call( yAxis );\n        }\n\n        function zoomed() {\n            var t = d3.event.transform;\n            xscale.domain(t.rescaleX(xscale0).domain());\n            yscale.domain(t.rescaleY(yscale0).domain());\n            gX.call(xAxis);\n            gY.call(yAxis);\n            plotArea.selectAll(\".line\").attr( \"d\", function( d ) { return line( d.data ); } );\n        }\n\n        function tipOn() {\n            plotArea.selectAll( \".line\" ).style( \"opacity\" , 0.2);\n            d3.select(this)\n                .style( \"opacity\" , 1.0)\n                .style( \"stroke-width\", \"4px\" );\n        }\n\n        function tipOff() {\n            plotArea.selectAll( \".line\" ).style( \"opacity\" , 1.0);\n            d3.select(this)\n                .style( \"stroke-width\", \"2px\" );\n        }\n\n        data.newData = false;\n    }\n};\n\nexport { d3LineSeries };","const d3Scatter = {\n\n    make : function ( element, data, layout ) {\n\n        console.log(data);\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svgWidth = container.node().offsetWidth,\n            svgHeight = layout.height;\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var svg = container.append(\"svg\")\n            .attr(\"width\", svgWidth)\n            .attr(\"height\", svgHeight)\n            .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n                .attr( \"class\", \"plotArea\" );\n\n        d3Scatter.update (element, data, layout);\n\n    },\n\n    update : function ( element, data, layout ) {\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svg = container.select(\"svg\");\n\n        var svgWidth = svg.attr(\"width\");\n        var svgHeight = svg.attr(\"height\");\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var xscale = d3.scaleLinear()\n            .range( [0, width] )\n            .domain( d3.extent( data.points, function (d) { return d.x; } ) );\n        var yscale = d3.scaleLinear()\n            .range( [height, 0] )\n            .domain( d3.extent( data.points, function (d) { return d.y; } ) );\n\n        var colour = d3.scaleOrdinal( d3.schemeCategory20c );\n\n        var plotArea = svg.select(\".plotArea\");\n\n        var points = plotArea.selectAll( \"circle\" )\n            .data( data.points );\n\n        points.enter()\n            .append( \"circle\" )\n            .attr( \"r\", 5 )\n            .attr( \"cx\", function( d ) { return xscale( d.x ); } )\n            .attr( \"cy\", function( d ) { return yscale( d.y ); } )\n            .style( \"fill\", function( d ) { return colour( d.colField ); } )\n            //.style( \"fill-opacity\", 1e-6)\n            //.transition()\n            //    .style( \"fill-opacity\", 1);\n\n        points.transition()\n            //.duration(5000)\n            .attr( \"r\", 5 )\n            .attr( \"cx\", function( d ) { return xscale( d.x ); } )\n            .attr( \"cy\", function( d ) { return yscale( d.y ); } )\n            .style( \"fill\", function( d ) { return colour( d.colField ); } ); \n\n        points.exit().remove();\n\n        var xAxis = plotArea.select(\".xAxis\");\n        if ( xAxis.empty() ) {\n            plotArea.append(\"g\")\n                .attr( \"transform\", \"translate(0,\" + height + \")\" )\n                .attr( \"class\", \"xAxis\")\n                .call( d3.axisBottom( xscale ) )\n                .append(\"text\")\n                    .attr(\"fill\", \"#000\")\n                    .attr(\"x\", width)\n                    .attr(\"y\", margin.bottom)\n                    .attr(\"text-anchor\", \"end\")\n                    .text(layout.xAxisLabel);\n        } else {\n            xAxis.attr( \"transform\", \"translate(0,\" + height + \")\" ).transition().call( d3.axisBottom( xscale ) );\n        }\n\n        var yAxis = plotArea.select(\".yAxis\");\n        if ( yAxis.empty() ) {\n            plotArea.append(\"g\")\n                .attr( \"class\", \"yAxis\")\n                .call( d3.axisLeft( yscale ) )\n                .append(\"text\")\n                    .attr(\"fill\", \"#000\")\n                    .attr(\"transform\", \"rotate(-90)\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", -margin.left + 15)\n                    .attr(\"text-anchor\", \"end\")\n                    .text(layout.yAxisLabel);\n        } else {\n            yAxis.transition().call( d3.axisLeft( yscale ) );\n        }\n\n    }\n\n};\n\n\nexport { d3Scatter };","function makeNewPlot( plotData, index ) {\n\n    var plot = d3.select( this )\n    \t.append( \"div\" ).attr( \"class\", \"col-md-\"+plotData.layout.colWidth+\" plotWrapper\" )\n    \t.append( \"div\" ).attr( \"class\", \"card\" );\n\n    var plotHeader = plot.append( \"div\" ).attr( \"class\", \"card-header plotTitle\")\n    \t .html( plotData.layout.title );\n\n    var plotBody = plot.append( \"div\" ).attr( \"class\", \"plot\");\n\n    plotData.plotFunc.make(plotBody.node(),plotData.data,plotData.layout);\n\n}\n\nexport { makeNewPlot };","function updatePlot( plotData, index ) {\n\n    var plot = d3.select( this ) // this is the plotBody selection\n\n    //var plotHeader = plot.append( \"div\" ).attr( \"class\", \"card-header plotTitle\")\n    //\t .html( `${plotData.layout.title}` );\n\n    //var plotBody = plot.append( \"div\" ).attr( \"class\", \"plot\");\n\n    plotData.plotFunc.update(plot.node(),plotData.data,plotData.layout);\n\n}\n\nexport { updatePlot };","import { makeNewPlot } from './makeNewPlot.js';\nimport { updatePlot } from './updatePlot.js';\n\nfunction update( elementId, session ) {\n\n\tvar element = d3.select( \"#\" + elementId );\n\n    if (session.filteredTaskIds !== undefined){\n        element.select(\".filteredTaskCount\")\n            .html(\"<p> Number of Tasks in Filter = \" + session.filteredTaskIds.length + \"</p>\" );\n    } else {\n        element.select(\".filteredTaskCount\").html(\"<p> Number of Tasks in Filter = All </p>\");\n    }\n\n    var plotRows = element.selectAll( \".plotRow\" )\n    \t.data( session.plotRows ); \n\n    var newPlotRows = plotRows.enter()\n    \t.append( \"div\" ).attr( \"class\", \"card bg-light plotRow\" )\n    \t.attr( \"style\" , \"margin-bottom:20px\");\n\n    var newPlotRowsHeader = newPlotRows\t\n    \t.append( \"div\" ).attr( \"class\", \"card-header plotRowTitle\" )\n    \t.call( function(selection) {\n    \t\tselection.html( function(d) { return \"<h3 style='display:inline'>\" + d.title + \"</h3>\" } );\n    \t});\n\n    var newPlotRowsBody = newPlotRows\n    \t.append( \"div\" ).attr( \"class\", \"row no-gutters plotRowBody\" );\n\n    var newPlots = newPlotRowsBody.selectAll( \".plot\")\n    \t.data( function( d ) { return d.plots; } ) \n    \t.enter().each( makeNewPlot );\n\n    plotRows.selectAll( \".plotRowBody\" ).selectAll( \".plot\" )\n\t\t.data( function( d ) { return d.plots; } )\n\t\t.enter().each( makeNewPlot );\n\n    var plotRowPlots = plotRows.selectAll( \".plot\" )\n    \t.data( function( d ) { return d.plots; } )\n    \t.each( updatePlot );\n\n   \tvar plotRowPlotWrappers = plotRows.selectAll( \".plotWrapper\")\n   \t\t.data( function( d ) { return d.plots; } )\n   \t\t.each( function( plotData, index ) {\n   \t\t\tvar plotWrapper = d3.select (this);\n   \t\t\tvar plotTitle = plotWrapper.select(\".plotTitle\")\n    \t \t.html( plotData.layout.title );\n   \t\t});\n\n    plotRows.exit().remove();\n    plotRowPlotWrappers.exit().remove();\n\n}\n\nexport { update };","class DbsliceData { }\n\nexport let dbsliceData = new DbsliceData();\n\n\n\n","function makePlotsFromPlotRowCtrl( ctrl ) {\n\n\tvar plotPromises = [];\n\n\tvar slicePromises = [];\n\n\tif ( ctrl.sliceIds === undefined ) {\n\n\t\tvar nTasks = ctrl.taskIds.length;\n\n\t\tif ( ctrl.maxTasks !== undefined ) nTasks = Math.min( nTasks, ctrl.maxTasks );\n\n\t\tfor ( var index = 0; index < nTasks; ++index ) {\n\n\t\t\tif ( ctrl.urlTemplate == null ) {\n\n\t\t\t\tvar url = ctrl.taskIds[ index ];\n\n\t\t\t} else {\n\n\t\t\t\tvar url = ctrl.urlTemplate.replace( \"${taskId}\", ctrl.taskIds[ index ] );\n\n\t\t\t}\n\n\t\t\tvar title = ctrl.taskLabels[ index ];\n\n       \t\tvar plotPromise = fetch(url)\n\n        \t\t.then(function( response ) {\n\n        \t\t\treturn response.json();\n\n        \t\t})\n\n        \t\t.then(function( responseJson ) {\n\n        \t\t\tvar plot = {};\n\n        \t\t\tif (ctrl.formatDataFunc !== undefined) {\n\n        \t\t\t\tplot.data = ctrl.formatDataFunc( responseJson );\n\n        \t\t\t} else {\n\n        \t\t\t\tplot.data = responseJson;\n\n        \t\t\t}\n\n        \t\t\tplot.layout = Object.assign({}, ctrl.layout);\n\n        \t\t\tplot.plotFunc = ctrl.plotFunc;\n\n        \t\t\tplot.layout.title = title;\n\n        \t\t\tplot.data.newData = true;\n\n        \t\t\treturn plot;\n\n        \t\t} );\n\n        \tplotPromises.push(plotPromise);\n\n        }\n\n    } else {\n\n    \tctrl.sliceIds.forEach( function( sliceId, sliceIndex ) {\n\n    \t\tvar slicePromisesPerPlot = [];\n\n    \t\tvar nTasks = ctrl.taskIds.length;\n\n    \t\tif ( ctrl.maxTasks !== undefined ) Math.min( nTasks, ctrl.maxTasks );\n\n    \t\tfor ( var index = 0; index < nTasks; ++index ) {\n\n    \t\t\tvar url = ctrl.urlTemplate\n    \t\t\t\t.replace( \"${taskId}\", ctrl.taskIds[ index ] )\n    \t\t\t\t.replace( \"${sliceId}\", sliceId );\n\n    \t\t\tvar slicePromise = fetch(url)\n\n    \t\t\t\t.then(function( response ) {\n\n    \t\t\t\t\treturn response.json();\n\n    \t\t\t\t});\n\n    \t\t\tslicePromisesPerPlot.push( slicePromise );\n\n    \t\t}\n\n    \t\tslicePromises.push( slicePromisesPerPlot );\n\n    \t\tvar plotPromise = Promise.all( slicePromises[ sliceIndex ] ).then( function (responseJson) {\n\n    \t\t\tvar plot = {};\n\n    \t\t\tif (ctrl.formatDataFunc !== undefined) {\n\n    \t\t\t\tplot.data = ctrl.formatDataFunc( responseJson );\n\n    \t\t\t} else {\n\n    \t\t\t\tplot.data = responseJson;\n\n    \t\t\t}\n\n    \t\t\tplot.layout = Object.assign({}, ctrl.layout);\n\n    \t\t\tplot.plotFunc = ctrl.plotFunc;\n\n    \t\t\tplot.layout.title = sliceId;\n\n    \t\t\tplot.data.newData = true;\n\n    \t\t\treturn plot;\n\n    \t\t});\n\n    \t\tplotPromises.push(plotPromise);\n\n    \t});\n\n\t}\n\n\treturn Promise.all(plotPromises);\n\n}\n\nexport { makePlotsFromPlotRowCtrl };","import { dbsliceData } from './dbsliceData.js';\nimport { render } from './render.js';\nimport { makePlotsFromPlotRowCtrl } from './makePlotsFromPlotRowCtrl.js';\n\n\nfunction refreshTasksInPlotRows() {\n\n\tvar plotRows = dbsliceData.session.plotRows;\n\n\tvar plotRowPromises = [];\n\n\tplotRows.forEach( function( plotRow ) {\n\n\t\tif (plotRow.ctrl !== undefined ) {\n\n\t\t\tvar ctrl = plotRow.ctrl;\n\n\t\t\tif (ctrl.plotFunc !== undefined ) {\n\n\t\t\t\tif ( ctrl.tasksByFilter ) {\n\n\t\t\t\t\tctrl.taskIds = dbsliceData.session.filteredTaskIds;\n\t\t\t\t\tctrl.taskLabels = dbsliceData.session.filteredTaskLabels;\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif ( ctrl.tasksByList ) {\n\n\t\t\t\t\tctrl.taskIds = dbsliceData.session.manualListTaskIds;\n\n\t\t\t\t}\n\n\t\t\t\tvar plotRowPromise = makePlotsFromPlotRowCtrl( ctrl ).then( function ( plots ){\n\t\t\t\t\tplotRow.plots = plots;\n\t\t\t\t});\n\n\t\t\t\tplotRowPromises.push( plotRowPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t});\n\n\tPromise.all( plotRowPromises ).then( function() {\n\n\t\t//console.log(\"rendering....\");\n\n\t\trender( dbsliceData.elementId, dbsliceData.session, dbsliceData.config );\n\n\t});\n\n\n\n}\n\nexport { refreshTasksInPlotRows };\n\n\n","import { refreshTasksInPlotRows } from './refreshTasksInPlotRows.js';\n\nfunction makeSessionHeader( element, title, subtitle, config ) {\n\n\telement.append( \"div\" )\n\t\t.attr( \"class\" , \"row sessionHeader\" )\n\t\t.append( \"div\" )\n\t\t\t.attr( \"class\" , \"col-md-12 sessionTitle\" );\n\n\tvar titleHtml = \"<br/><h1 style='display:inline'>\" + title + \"</h1>\";\n\n\tif ( config.plotTasksButton ) {\n\n\t\ttitleHtml += \"<button class='btn btn-success float-right' id='refreshTasks'>Plot Selected Tasks</button><br/>\";\n\n\t} else {\n\t\ttitleHtml += \"<br/>\";\n\t} \n\n\tif ( subtitle === undefined ) {\n\n\t\ttitleHtml += \"<br/>\";\n\n\t} else {\n\n\t\ttitleHtml += \"<p>\" + subtitle + \"</p>\";\n\n\t}\n\n\telement.select( \".sessionTitle\" )\n\t\t.html( titleHtml )\n\t\t.append( \"div\" )\n\t\t\t.attr( \"class\" , \"filteredTaskCount\" );\t\n\n\n\t$( \"#refreshTasks\" ).on( \"click\" , function() { refreshTasksInPlotRows() } );\n\n}\n   \n\nexport { makeSessionHeader };","import { update } from './update.js';\nimport { dbsliceData } from './dbsliceData.js';\nimport { makeSessionHeader } from './makeSessionHeader.js';\n\nfunction render( elementId, session, config = { plotTasksButton : false } ) {\n\n\tdbsliceData.session = session;\n\tdbsliceData.elementId = elementId;\n\tdbsliceData.config = config;\n\n\tvar element = d3.select( \"#\" + elementId );\n\n\tvar sessionHeader = element.select(\".sessionHeader\");\n\n    if ( sessionHeader.empty() ) makeSessionHeader( element, session.title, session.subtitle, config );\n\n\tupdate( elementId, session );\n\n}\n\nexport { render };","import { render } from './render.js'\nimport { dbsliceData } from './dbsliceData.js'\n\nfunction cfUpdateFilters( crossfilter ) {\n\n\t// update crossfilter with the filters selected at the bar charts\n    crossfilter.filterSelected.forEach( ( filters, i ) => {\n\n      // if the filters array is empty: ie. all are selected, then reset the dimension\n      if ( filters.length === 0 ) {\n        //reset filter\n        crossfilter.metaDims[ i ].filterAll();\n      } else {\n        crossfilter.metaDims[ i ].filter( ( d ) => filters.indexOf( d ) > -1 );\n      }\n    } );\n\n    // update crossfilter with the items selected at the histograms\n    crossfilter.histogramSelectedRanges.forEach( ( selectedRange, i ) => {\n      // first reset all filters\n      crossfilter.dataDims[ i ].filterAll();\n      if ( selectedRange.length !== 0 ) {\n        crossfilter.dataDims[ i ].filter( d => d >= selectedRange[ 0 ] && d <= selectedRange[ 1 ] ? true : false );\n      }\n    } );\n\n\n    var currentMetaData = crossfilter.metaDims[0].top(Infinity);\n\n\n    dbsliceData.session.filteredTaskIds = currentMetaData.map(function(d){return d.taskId});\n\n    if ( currentMetaData[0].label !== undefined ) {\n\n        dbsliceData.session.filteredTaskLabels = currentMetaData.map(function(d){return d.label});\n\n    } else {\n\n        dbsliceData.session.filteredTaskLabels = currentMetaData.map(function(d){return d.taskId});\n    }\n\n\n    //render( dbsliceData.elementId , dbsliceData.session , dbsliceData.config );\n\n}\n\nexport { cfUpdateFilters };","import { cfUpdateFilters } from '../core/cfUpdateFilters.js';\nimport { render } from '../core/render.js';\nimport { dbsliceData } from '../core/dbsliceData.js';\n\nconst cfD3BarChart = {\n\n    make : function( element, data, layout ) {\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 20};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svgWidth = container.node().offsetWidth,\n            svgHeight = layout.height;\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var dimId = data.cfData.metaDataProperties.indexOf( data.property );\n\n        var svg = container.append(\"svg\")\n            .attr(\"width\", svgWidth)\n            .attr(\"height\", svgHeight)\n            .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n                .attr( \"class\", \"plotArea\" )\n                .attr( \"dimId\", dimId);\n\n        cfD3BarChart.update( element, data, layout );\n\n    }, \n\n    update : function ( element, data, layout ) {\n     \n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 20};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svg = container.select(\"svg\");\n\n        var svgWidth = svg.attr(\"width\");\n        var svgHeight = svg.attr(\"height\");\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var plotArea = svg.select(\".plotArea\");\n        var dimId = plotArea.attr(\"dimId\");\n\n        var cf = data.cfData.cf;\n        var property = data.property;\n\n        var dim = data.cfData.metaDims[ dimId ];\n        var group = dim.group();\n        //var items = group.top( Infinity );\n        var items = group.all()\n\n        var x = d3.scaleLinear()\n            .range( [0, width] )\n            .domain( [ 0, d3.max( items, v => v.value ) ] );\n\n        var y = d3.scaleBand()\n            .range( [0, height] )\n            .domain(items.map(function(d){ return d.key; }))\n            .padding( [0.2] )\n            .align([0.5]);\n\n        var colour = d3.scaleOrdinal( d3.schemeCategory20c );\n\n        var bars = plotArea.selectAll( \"rect\" )\n            .data( items, v => v.key );\n\n        bars.enter()\n            .append( \"rect\" )\n            .on( \"click\", ( selectedItem ) => {\n\n                if ( data.cfData.filterSelected[ dimId ] === undefined ) {\n                     data.cfData.filterSelected[ dimId ] = [];\n                }\n\n                // check if current filter is already active\n                if ( data.cfData.filterSelected[ dimId ].indexOf( selectedItem.key ) !== -1 ) {\n\n                    // already active\n                    var ind = data.cfData.filterSelected[ dimId ].indexOf( selectedItem.key );\n                    data.cfData.filterSelected[ dimId ].splice( ind, 1 );\n\n                } else {\n\n                    data.cfData.filterSelected[ dimId ].push( selectedItem.key );\n\n                }\n\n                cfUpdateFilters(data.cfData);\n                render( dbsliceData.elementId , dbsliceData.session , dbsliceData.config );\n\n            })\n            .attr( \"height\", y.bandwidth() )\n            .attr( \"y\", v => y(v.key) )\n            .style( \"fill\", v => colour(v.key) )\n            .transition()\n                .attr( \"width\", v => x( v.value ) )\n                // initialise opacity for later transition\n                .attr( \"opacity\", 1 );\n\n        // updating the bar chart bars\n        bars.transition()\n            .attr( \"width\", v => x( v.value ) )\n            // change colour depending on whether the bar has been selected\n            .attr( \"opacity\", ( v ) => {\n\n                // if no filters then all are selected\n                if ( data.cfData.filterSelected[ dimId ] === undefined || data.cfData.filterSelected[ dimId ].length === 0 ) {\n\n                    return 1;\n\n                } else {\n\n                    return data.cfData.filterSelected[ dimId ].indexOf( v.key ) === -1 ? 0.2 : 1;\n\n                }\n\n            } );\n\n        var xAxis = plotArea.select(\".xAxis\");\n        if ( xAxis.empty() ) {\n            plotArea.append(\"g\")\n                .attr( \"transform\", \"translate(0,\" + height + \")\" )\n                .attr( \"class\", \"xAxis\")\n                .call( d3.axisBottom( x ) )\n                .append(\"text\")\n                    .attr(\"fill\", \"#000\")\n                    .attr(\"x\", width)\n                    .attr(\"y\", margin.bottom)\n                    .attr(\"text-anchor\", \"end\")\n                    .text(\"Number of Tasks\");\n        } else {\n            xAxis.attr( \"transform\", \"translate(0,\" + height + \")\" ).transition().call( d3.axisBottom( x ) );\n        }\n\n        var yAxis = plotArea.select(\".yAxis\");\n        if ( yAxis.empty() ) {\n            plotArea.append(\"g\")\n                .attr( \"class\", \"yAxis\")\n                .call( d3.axisLeft( y ).tickValues( [] ) );\n        } else {\n            yAxis.transition().call( d3.axisLeft( y ).tickValues( []) );\n        }\n\n        var keyLabels = plotArea.selectAll( \"keyLabel\" )\n            .data( items, v => v.key );\n\n        keyLabels.enter()\n            .append( \"text\" )\n            .attr( \"class\", \"keyLabel\" )\n            .attr( \"x\", 0 )\n            .attr( \"y\", v => y(v.key) + 0.5*y.bandwidth() )\n            .attr( \"dx\", 5 )\n            .attr( \"dy\", \".35em\" )\n            .attr( \"text-anchor\", \"start\" )\n            .text( v => v.key );\n\n        // updating meta Labels\n        keyLabels\n            .text( v => v.key );\n\n    }\n};\n\nexport { cfD3BarChart };","import { cfUpdateFilters } from '../core/cfUpdateFilters.js';\nimport { render } from '../core/render.js';\nimport { dbsliceData } from '../core/dbsliceData.js';\n\nconst cfD3Histogram = {\n\n    make : function( element, data, layout ) {\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svgWidth = container.node().offsetWidth,\n            svgHeight = layout.height;\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var dimId = data.cfData.dataProperties.indexOf( data.property );\n\n        var svg = container.append(\"svg\")\n            .attr(\"width\", svgWidth)\n            .attr(\"height\", svgHeight)\n\n        var plotArea = svg.append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n            .attr( \"class\", \"plotArea\" )\n            .attr( \"dimId\", dimId);\n\n        var dim = data.cfData.dataDims[ dimId ];       \n        var items = dim.top( Infinity );\n\n        var xDomMax = d3.max( items, d => d[ data.property ] ) * 1.1 \n        plotArea.attr( \"xDomMax\", xDomMax)\n\n        var xDomMin = d3.min( items, d => d[ data.property ] ) * 0.9\n        plotArea.attr( \"xDomMin\", xDomMin)\n\n        var x = d3.scaleLinear()\n            .domain( [ xDomMin, xDomMax ] )\n            .rangeRound( [ 0, width ] );\n\n        plotArea.append( \"g\" )\n            .attr( \"transform\", \"translate(0,\" + height + \")\" )\n            .call( d3.axisBottom( x ) );\n\n\n        var brush = d3.brushX()\n            .extent( [\n                [ 0, 0 ],\n                [ width, height ]\n            ] )\n            .on( \"start brush end\", brushmoved );\n\n        var gBrush = svg.append( \"g\" )\n            .attr( \"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\" )\n            .attr( \"class\", \"brush\" )\n            .call( brush );\n\n\n        // style brush resize handle\n        // https://github.com/crossfilter/crossfilter/blob/gh-pages/index.html#L466\n        var brushResizePath = function( d ) {\n            var e = +( d.type == \"e\" ),\n                x = e ? 1 : -1,\n                y = height / 2;\n            return \"M\" + ( .5 * x ) + \",\" + y + \"A6,6 0 0 \" + e + \" \" + ( 6.5 * x ) + \",\" + ( y + 6 ) + \"V\" + ( 2 * y - 6 ) + \"A6,6 0 0 \" + e + \" \" + ( .5 * x ) + \",\" + ( 2 * y ) + \"Z\" + \"M\" + ( 2.5 * x ) + \",\" + ( y + 8 ) + \"V\" + ( 2 * y - 8 ) + \"M\" + ( 4.5 * x ) + \",\" + ( y + 8 ) + \"V\" + ( 2 * y - 8 );\n        }\n\n        var handle = gBrush.selectAll( \"handleCustom\" )\n            .data( [ { type: \"w\" } , { type: \"e\" } ] )\n            .enter().append( \"path\" )\n                .attr( \"class\", \"handleCustom\" )\n                .attr( \"stroke\", \"#000\" )\n                .attr( \"cursor\", \"ewResize\" )\n                .attr( \"d\", brushResizePath );\n\n\n        var brushInit = true;\n        gBrush.call( brush.move, x.domain().map( x ) );\n        brushInit = false;\n\n\n        function brushmoved() {\n            var s = d3.event.selection;\n            if ( s == null ) {\n                handle.attr( \"display\", \"none\" );\n                data.cfData.histogramSelectedRanges[ dimId ] = [];\n                cfUpdateFilters(data.cfData);\n                if ( brushInit == false ) render( dbsliceData.elementId , dbsliceData.session , dbsliceData.config );\n            } else {\n                var sx = s.map( x.invert );\n                handle.attr( \"display\", null ).attr( \"transform\", function( d, i ) {\n                    return \"translate(\" + [ s[ i ], -height / 4 ] + \")\";\n                } );\n                data.cfData.histogramSelectedRanges[ dimId ] = sx;\n                cfUpdateFilters(data.cfData);\n                if ( brushInit == false ) render( dbsliceData.elementId , dbsliceData.session , dbsliceData.config );\n            }\n        }\n\n\n        cfD3Histogram.update( element, data, layout );\n\n    }, \n\n    update : function ( element, data, layout ) {\n     \n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svg = container.select(\"svg\");\n\n        var svgWidth = svg.attr(\"width\");\n        var svgHeight = svg.attr(\"height\");\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var plotArea = svg.select(\".plotArea\");\n        var dimId = plotArea.attr(\"dimId\");\n        var dim = data.cfData.dataDims[ dimId ];\n        var cf = data.cfData.cf;\n        var property = data.property;\n\n        var formatCount = d3.format( \",.0f\" );\n\n        var items = dim.top( Infinity );\n\n        var xDomMax = plotArea.attr(\"xDomMax\");\n        var xDomMin = plotArea.attr(\"xDomMin\");\n        var x = d3.scaleLinear()\n            .domain( [ xDomMin, xDomMax] )\n            .rangeRound( [ 0, width ] );\n\n        var histogram = d3.histogram()\n            .value( d => d[ property ] )\n            .domain( x.domain() )\n            .thresholds( x.ticks( 20 ) );\n\n        var bins = histogram( items );\n\n        var y = d3.scaleLinear()\n            .domain( [ 0, d3.max( bins, d => d.length ) ] )\n            .range( [ height, 0 ] );\n\n        var bars = plotArea.selectAll( \"rect\" )\n            .data( bins );\n\n        bars.enter()\n            .append( \"rect\" )\n                .attr( \"transform\", d => \"translate(\" + x( d.x0 ) + \",\" + y( d.length ) + \")\" )\n                .attr( \"x\", 1 )\n                .attr( \"width\", d => x(d.x1)-x(d.x0)-1 )\n                .attr( \"height\", d => height - y( d.length ) )\n                .style( \"fill\", \"steelblue\" )\n                .attr( \"opacity\", \"1\" );\n\n        bars.transition()\n            .attr( \"transform\", d => \"translate(\" + x( d.x0 ) + \",\" + y( d.length ) + \")\" )\n            .attr( \"x\", 1 )\n            .attr( \"width\", d => x(d.x1)-x(d.x0)-1 )\n            .attr( \"height\", d => height - y( d.length ) );\n\n        bars.exit().remove();\n\n        var yAxis = plotArea.select(\".yAxis\");\n        if ( yAxis.empty() ) {\n            plotArea.append(\"g\")\n                .attr( \"class\", \"yAxis\")\n                .call( d3.axisLeft( y ) );\n        } else {\n            yAxis.transition().call( d3.axisLeft( y ) );\n        }\n\n\n        var yAxisLabel = plotArea.select(\".yAxis\").select(\".yAxisLabel\");\n        if ( yAxisLabel.empty() ) {\n             plotArea.select(\".yAxis\").append(\"text\")\n                .attr(\"class\", \"yAxisLabel\")\n                .attr(\"fill\", \"#000\")\n                .attr(\"transform\", \"rotate(-90)\")\n                .attr(\"x\", 0)\n                .attr(\"y\", -25)\n                .attr(\"text-anchor\", \"end\")\n                .text(\"Number of tasks\");\n            }\n\n        var xAxisLabel = plotArea.select(\".yAxis\").select(\".xAxisLabel\");\n        if ( xAxisLabel.empty() ) {\n            plotArea.select(\".yAxis\").append(\"text\")\n                .attr(\"class\", \"xAxisLabel\")\n                .attr(\"fill\", \"#000\")\n                .attr(\"x\", width)\n                .attr(\"y\", height+margin.bottom)\n                .attr(\"text-anchor\", \"end\")\n                .text(property);\n        }\n\n         \n\n\n    }\n\n};\n\n\nexport { cfD3Histogram };","const cfD3Scatter = {\n\n    make : function( element, data, layout ) {\n\n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svgWidth = container.node().offsetWidth,\n            svgHeight = layout.height;\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var dimId = data.cfData.dataProperties.indexOf( data.xProperty );\n\n        var svg = container.append(\"svg\")\n            .attr(\"width\", svgWidth)\n            .attr(\"height\", svgHeight)\n            .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n                .attr( \"class\", \"plotArea\" )\n                .attr( \"dimId\", dimId);\n\n        cfD3Scatter.update( element, data, layout );\n\n    }, \n\n    update : function ( element, data, layout ) {\n     \n        var marginDefault = {top: 20, right: 20, bottom: 30, left: 50};\n        var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var svg = container.select(\"svg\");\n\n        var svgWidth = svg.attr(\"width\");\n        var svgHeight = svg.attr(\"height\");\n\n        var width = svgWidth - margin.left - margin.right;\n        var height = svgHeight - margin.top - margin.bottom;\n\n        var plotArea = svg.select(\".plotArea\");\n        var dimId = plotArea.attr(\"dimId\");\n\n        var cf = data.cfData.cf;\n        var xProperty = data.xProperty;\n        var yProperty = data.yProperty;\n        var cProperty = data.cProperty;\n\n        var dim = data.cfData.dataDims[ dimId ];\n        var pointData = dim.top( Infinity );\n\n        var xscale = d3.scaleLinear()\n            .range( [0, width] )\n            .domain( d3.extent( pointData, function (d) { return d[ xProperty ]; } ) );\n\n        var xscale0 = d3.scaleLinear()\n            .range( [0, width] )\n            .domain( d3.extent( pointData, function (d) { return d[ xProperty ]; } ) );\n\n        var yscale = d3.scaleLinear()\n            .range( [height, 0] )\n            .domain( d3.extent( pointData, function (d) { return d[ yProperty ]; } ) );\n\n        var yscale0 = d3.scaleLinear()\n            .range( [height, 0] )\n            .domain( d3.extent( pointData, function (d) { return d[ yProperty ]; } ) );\n\n        var colour = d3.scaleOrdinal( d3.schemeCategory20c );\n\n        var plotArea = svg.select(\".plotArea\");\n\n        var clip = svg.append(\"clipPath\")\n            .attr(\"id\", \"clip\")\n            .append(\"rect\")\n                .attr(\"width\", width)\n                .attr(\"height\", height);\n\n        var zoom = d3.zoom()\n            .scaleExtent([0.5, Infinity])\n            .on(\"zoom\", zoomed);\n\n        svg.transition().call(zoom.transform, d3.zoomIdentity);\n        svg.call(zoom);\n\n        var points = plotArea.selectAll( \"circle\" )\n            .data( pointData );\n\n        points.enter()\n            .append( \"circle\" )\n            .attr( \"r\", 5 )\n            .attr( \"cx\", function( d ) { return xscale( d[ xProperty ] ); } )\n            .attr( \"cy\", function( d ) { return yscale( d[ yProperty ] ); } )\n            .style( \"fill\", function( d ) { return colour( d[ cProperty ] ); } )\n            .attr( \"clip-path\", \"url(#clip)\")\n            .on( \"mouseover\", tipOn )\n            .on( \"mouseout\", tipOff );\n \n        points.transition()\n            .attr( \"r\", 5 )\n            .attr( \"cx\", function( d ) { return xscale( d[ xProperty ] ); } )\n            .attr( \"cy\", function( d ) { return yscale( d[ yProperty ] ); } )\n            .style( \"fill\", function( d ) { return colour( d[ cProperty ] ); } ); \n\n        points.exit().remove();\n\n        var xAxis = d3.axisBottom( xscale );\n        var yAxis = d3.axisLeft( yscale );\n\n        var gX = plotArea.select(\".axis--x\");\n        if ( gX.empty() ) {\n            gX = plotArea.append(\"g\")\n                .attr( \"transform\", \"translate(0,\" + height + \")\" )\n                .attr( \"class\", \"axis--x\")\n                .call( xAxis );\n            gX.append(\"text\")\n                .attr(\"fill\", \"#000\")\n                .attr(\"x\", width)\n                .attr(\"y\", margin.bottom-2)\n                .attr(\"text-anchor\", \"end\")\n                .text(xProperty);\n        } else {\n            gX.transition().call( xAxis );\n        }\n\n        var gY = plotArea.select(\".axis--y\");\n        if ( gY.empty() ) {\n            gY = plotArea.append(\"g\")\n                .attr( \"class\", \"axis--y\")\n                .call( yAxis );\n            gY.append(\"text\")\n                .attr(\"fill\", \"#000\")\n                .attr(\"transform\", \"rotate(-90)\")\n                .attr(\"x\", 0)\n                .attr(\"y\", -margin.left + 15)\n                .attr(\"text-anchor\", \"end\")\n                .text(yProperty);\n        } else {\n            gY.transition().call( yAxis );\n        }\n\n        function zoomed() {\n            var t = d3.event.transform;\n            xscale.domain(t.rescaleX(xscale0).domain());\n            yscale.domain(t.rescaleY(yscale0).domain());\n            gX.call(xAxis);\n            gY.call(yAxis);\n            plotArea.selectAll(\"circle\")\n                .attr( \"cx\", function( d ) { return xscale( d[ xProperty ] ); } )\n                .attr( \"cy\", function( d ) { return yscale( d[ yProperty ] ); } );\n        }\n\n        function tipOn() {\n            plotArea.selectAll( \"circle\" ).style( \"opacity\" , 0.2);\n            d3.select(this)\n                .style( \"opacity\" , 1.0)\n                .attr( \"r\", 7 );\n        }\n\n        function tipOff() {\n            plotArea.selectAll( \"circle\" ).style( \"opacity\" , 1.0);\n            d3.select(this)\n                .attr( \"r\", 5 );\n        }\n\n    }\n};\n\nexport { cfD3Scatter };","const cfLeafletMapWithMarkers = {\n\n    make : function( element, data, layout ) {\n\n        cfLeafletMapWithMarkers.update( element, data, layout );\n\n    }, \n\n    update : function ( element, data, layout ) {\n     \n        //var marginDefault = {top: 20, right: 20, bottom: 30, left: 20};\n        //var margin = ( layout.margin === undefined ) ? marginDefault  : layout.margin;\n\n        var container = d3.select(element);\n\n        var width = container.node().offsetWidth,\n            height = layout.height;\n\n        container.select(\".plotArea\").remove();\n\n        // always make a new map\n        var mapDiv = container.append(\"div\")\n            .attr(\"id\", \"mapnow\")\n            .style(\"width\", width+'px')\n            .style(\"height\", height+'px')\n            .attr(\"class\", \"plotArea\");\n\n        var dimId = data.cfData.dataProperties.indexOf( data.property );\n\n        var cf = data.cfData.cf;\n        var property = data.property;\n\n        var dim = data.cfData.metaDims[ dimId ];\n        var items = dim.top( Infinity );\n\n        var map = L.map('mapnow');\n\n        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n            attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n\n        var markers=[];\n        items.forEach( function (item) {\n            var marker = L.marker([ item[ property ].lat, item[ property ].long ]);\n            if (item.label != undefined) {\n                marker.bindPopup( item.label );\n            }\n            markers.push(marker);\n        });\n\n        var markerGroup = L.featureGroup(markers).addTo(map);\n        map.fitBounds(markerGroup.getBounds().pad(0.5));\n\n \n\n    }\n};\n\nexport { cfLeafletMapWithMarkers };","function cfInit( metaData ) {\n\n\tvar cfData = {};\n\n\t//cfData.metaData = metaData;\n\n\tcfData.metaDataProperties = metaData.header.metaDataProperties;\n\n\tcfData.dataProperties = metaData.header.dataProperties;\n\n    cfData.cf = crossfilter( metaData.data );\n\n    cfData.metaDims = [];\n\n    cfData.metaDataProperties.forEach( ( property, i ) => {\n\n    \tcfData.metaDims.push( cfData.cf.dimension( d => d[ property ] ) );\n\n    } );\n\n    cfData.dataDims = [];\n\n    cfData.dataProperties.forEach( ( property, i ) => {\n\n    \tcfData.dataDims.push ( cfData.cf.dimension( d => d[ property ] ) );\n\n    } );\n\n    cfData.filterSelected = [];\n\n    cfData.histogramSelectedRanges = [];\n\n    return cfData;\n\n}\n\nexport { cfInit };","//require('babel-polyfill');\nrequire( 'whatwg-fetch' );\nexport { threeSurf3d } from './plot/threeSurf3d.js' ;\nexport { threeMeshFromStruct } from './plot/threeMeshFromStruct.js' ;\nexport { d3ContourStruct2d } from './plot/d3ContourStruct2d.js';\nexport { d3LineSeries } from './plot/d3LineSeries.js';\nexport { d3Scatter } from './plot/d3Scatter.js';\nexport { cfD3BarChart } from './plot/cfD3BarChart.js';\nexport { cfD3Histogram } from './plot/cfD3Histogram.js';\nexport { cfD3Scatter } from './plot/cfD3Scatter.js';\nexport { cfLeafletMapWithMarkers } from './plot/cfLeafletMapWithMarkers.js';\nexport { render } from './core/render.js';\nexport { update } from './core/update.js';\nexport { makeNewPlot } from './core/makeNewPlot.js';\nexport { updatePlot } from './core/updatePlot.js';\nexport { cfInit } from './core/cfInit.js';\nexport { cfUpdateFilters } from './core/cfUpdateFilters.js';\nexport { makePlotsFromPlotRowCtrl } from './core/makePlotsFromPlotRowCtrl.js'; \nexport { refreshTasksInPlotRows } from './core/refreshTasksInPlotRows.js'; \nexport { makeSessionHeader } from './core/makeSessionHeader.js';\n"],"names":["threeSurf3d","element","geometry","layout","update","newData","vScale","undefined","color","d3","scaleLinear","domain","interpolate","interpolateRdBu","faces","forEach","face","index","vertexColors","THREE","Color","faceValues","container","select","remove","div","append","attr","width","node","offsetWidth","height","computeFaceNormals","computeVertexNormals","material","MeshPhongMaterial","DoubleSide","VertexColors","scene","Scene","background","add","Mesh","renderer","WebGLRenderer","alpha","antialias","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","camera","PerspectiveCamera","position","z","controls","OrbitControls","addEventListener","render","enableZoom","ambientLight","AmbientLight","lights","PointLight","set","light","threeMeshFromStruct","data","x","y","v","n","m","xMinAll","min","surfaces","yMinAll","zMinAll","vMinAll","xMaxAll","max","yMaxAll","zMaxAll","vMaxAll","nDataSets","length","nds","xrange","yrange","zrange","xmid","ymid","zmid","scalefac","Geometry","noffset","size","nverts","k","newvert","Vector3","vertices","push","j","i","n0","n1","n2","n3","face1","Face3","face2","faceValue1","faceValue2","d3ContourStruct2d","marginDefault","top","right","bottom","left","margin","svgWidth","svgHeight","svg","plotArea","domainAspectRatio","rangeAspectRatio","xscale","range","yscale","thresholds","extent","zoom","scaleExtent","Infinity","on","zoomed","transition","call","transform","zoomIdentity","projection","geoTransform","px","py","xfrac","yfrac","xnow","ynow","xidx","yidx","idx0","idx1","idx2","idx3","Math","floor","stream","point","contours","smooth","selectAll","enter","geoPath","d","value","t","event","d3LineSeries","nseries","series","xmin","xmax","ymin","ymax","xminNow","xmaxNow","yminNow","ymaxNow","scaleTime","xscale0","yscale0","colour","scaleOrdinal","schemeCategory20c","line","clip","allSeries","each","seriesLine","name","style","tipOn","tipOff","exit","xAxis","axisBottom","ticks","yAxis","axisLeft","gX","empty","text","xAxisLabel","gY","yAxisLabel","rescaleX","rescaleY","d3Scatter","log","points","colField","makeNewPlot","plotData","plot","colWidth","plotHeader","html","title","plotBody","plotFunc","make","updatePlot","elementId","session","filteredTaskIds","plotRows","newPlotRows","newPlotRowsHeader","selection","newPlotRowsBody","newPlots","plots","plotRowPlots","plotRowPlotWrappers","plotWrapper","plotTitle","DbsliceData","dbsliceData","makePlotsFromPlotRowCtrl","ctrl","plotPromises","slicePromises","sliceIds","nTasks","taskIds","maxTasks","urlTemplate","url","replace","taskLabels","plotPromise","fetch","then","response","json","responseJson","formatDataFunc","Object","assign","sliceId","sliceIndex","slicePromisesPerPlot","slicePromise","Promise","all","refreshTasksInPlotRows","plotRowPromises","plotRow","tasksByFilter","filteredTaskLabels","tasksByList","manualListTaskIds","plotRowPromise","config","makeSessionHeader","subtitle","titleHtml","plotTasksButton","sessionHeader","cfUpdateFilters","crossfilter","filterSelected","filters","metaDims","filterAll","filter","indexOf","histogramSelectedRanges","selectedRange","dataDims","currentMetaData","map","taskId","label","cfD3BarChart","dimId","cfData","metaDataProperties","property","dim","group","items","scaleBand","key","padding","align","bars","selectedItem","ind","splice","bandwidth","tickValues","keyLabels","cfD3Histogram","dataProperties","xDomMax","xDomMin","rangeRound","brush","brushX","brushmoved","gBrush","brushResizePath","e","type","handle","brushInit","move","s","sx","invert","formatCount","format","histogram","bins","x0","x1","cfD3Scatter","xProperty","yProperty","cProperty","pointData","cfLeafletMapWithMarkers","mapDiv","L","tileLayer","addTo","markers","item","marker","lat","long","bindPopup","markerGroup","featureGroup","fitBounds","getBounds","pad","cfInit","metaData","header","cf","dimension","require"],"mappings":"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"}